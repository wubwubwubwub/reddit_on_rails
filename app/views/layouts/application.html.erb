<!DOCTYPE html>
<html>
  <head>
    
    <meta charset="utf-8">
  
    <title>RedditOnRails</title>
    
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
    <%= csrf_meta_tags %>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    
    <script src="http://heroku.github.com/template-app-bootstrap/jquery-1.7.1.min.js"></script>
    <script src="http://heroku.github.com/template-app-bootstrap/jquery.replacetext.min.js"></script>
    
  </head>
  
  <body>
    
    <%= content_for :search do %>
      <%= form_tag(search_path, :method => "get", :style => "margin: 0px 0 0 0") do %>
        <%= text_field_tag(:q, nil, :placeholder => "search") %>
        <%= submit_tag("Search") %>
      <% end %>
    <% end %>
    
    
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>   
          </a>
          <a class="brand" href="/">Reddit On Rails!</a>
          <div class="nav-collapse">
            <ul class="nav">
              <% if current_user.present? %> <!-- #user is logged in, show log out link -->
                <li><%= link_to 'Sign Out', destroy_user_session_path, method: :delete %></li>
                <li><%= link_to 'Create Link', new_link_path %></li>
              <% else %> <!-- #user isn't logged in, show log in link -->
                <li><%= link_to 'Sign In', new_user_session_path %></li>
                <li><%= link_to 'Register Now!', new_user_registration_path%></li>  
              <% end %>
            </ul>
            <div class="navbar-form">      
              <ul class="nav">
                <li><%= yield :search %></li>
              </ul>
            </div>
          </div>
          
        </div>
      </div>    
    </div>


    <%= content_for :sidebar do %>
      <%= link_to "Add a link", new_link_path %><br />
      <%= link_to "Show all", root_path %><br />
      <%= form_tag(search_path, :method => "get", :style => "margin: 5px 0 0 0") do %>
        <%= text_field_tag(:q, nil, :placeholder => "search") %>
        <%= submit_tag("Search") %>
      <% end %>
    <% end %>

    <div class="conatiner">
      <div class="row">
        <div class="span1"></div>
        <div class="span9">
          <% [:notice, :error, :alert].each do |level| %>
            <% unless flash[level].blank? %>
              <div data-alert="alert" class="alert alert-<%= level %> fade in">
                <a class="close" data-dismiss="alert" href="#">&times;</a>
                <%= content_tag :p, flash[level] %>
              </div>
            <% end %>
          <% end %>
          <%= yield %>
        </div>
        <% if content_for?(:sidebar) %>
          <div class="span2">
            <!-- div class="page-header"></div -->
            <h2>Sidebar!</h2>
            <%= yield :sidebar %>
          </div>
        <% end %>
      </div>
    </div>
    
  </body>
</html>
